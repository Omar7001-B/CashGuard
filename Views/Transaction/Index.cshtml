@model IEnumerable<ThreeFriends.Models.Transaction>
@using Newtonsoft.Json;



@* Calculate and display the current balance *@
@{
    var totalIncome = Model.Where(t => t.TransactionType == "Income").Sum(t => t.Amount);
    var totalExpense = Model.Where(t => t.TransactionType == "Expense").Sum(t => t.Amount);
    var currentBalance = totalIncome - totalExpense;
}
<!DOCTYPE html>
<!--=== Coding by CodingLab | www.codinglabweb.com === -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!----======== CSS ======== -->
    <link rel="stylesheet" href="/css/DashBoard.css">

    <!----===== Iconscout CSS ===== -->
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">

    <!----===== For Charts ===== -->
    <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            console.log("Hello");
            var chart = new CanvasJS.Chart("chartContainer", @Html.Raw(ViewBag.ChartConfig));
            chart.render();


            var ChartConfig2 = @Html.Raw(ViewBag.ChartConfig2);
            console.log("Before", ChartConfig2);
            ChartConfig2.data.forEach(function (data) { data.dataPoints.forEach(function (dataPoint) { dataPoint.x = new Date(dataPoint.x); }); });
            console.log("After", ChartConfig2);
            var chart2 = new CanvasJS.Chart("chartContainer2", ChartConfig2);
            chart2.render();

        }
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script src="https://kit.fontawesome.com/56942480bb.js" crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        #chartContainer,
        #chartContainer2 {
            display: inline-block;
            height: 400px;
            width: calc(50% - 20px); /* Set width to less than 50% to accommodate both with space between */
            margin-right: 10px; /* Add some space between the containers */
            border: 1px solid #ddd; /* Light border */
            box-sizing: border-box; /* Include padding and border in the width */
            box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
            border-radius:40px ; 
            overflow: hidden; 
        }


        /*To Do List Css Codes*/



        /* Center the list */


        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }


        .container {
            /* background: linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%); */
            padding: 10px;
        }


        .todo-app {
            min-height: 800px;
            max-width: 600px;
            min-width:600px ;
            background: #fff;
            padding: 40px 30px 70px;
            border-radius: 20px;
            /* box-shadow: 0px 0px 50px #afafaf; */
            box-shadow: 0px 0px 30px #afafaf;
            /* box-shadow: 0 0 5px 30px #d6d6d6; */
        }

        h2 {
            color: #002765;
            display: flex;
            align-items: center;
            margin-bottom: 50px;
            font-size: 30px;
            position: relative;
        }

        .todo-app h2 img {
            position: absolute;
            right: 0;
            width: 40px;
            margin-left: 20px;
        }

        .row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            /* background: #edeef0; */
            background: #fff;
            border: none;
            outline: 3px groove #000;
            outline-offset: 5px;
            border-radius: 30px;
            padding-left: 20px;
            margin-bottom: 25px;
            box-shadow: 0px 0px 10px #5d5d5d;
        }

            .row input {
                flex: 1; /*text full availabe width*/
                border: none;
                outline: none;
                padding: 10px;
                background: transparent;
                font-size: 18px;
                font-weight: 600;
                letter-spacing: 1px;
            }

                .row input::placeholder {
                    color: #1e008d;
                }

            .row button {
                border: none;
                outline: none;
                padding: 16px 30px;
                /* background:linear-gradient(45deg,#161823,#16386a) ; */
                background: #26068f;
                color: #fff;
                font-size: 18px;
                font-weight: 600;
                cursor: pointer;
                border-radius: 30px;
                margin: 1px;
            }

        ul li {
            list-style: none;
            font-size: 18px;
            font-weight: 500;
            letter-spacing: 1px;
            padding: 12px 8px 12px 50px;
            user-select: none;
            cursor: pointer;
            position: relative;
            margin-block: 10px;
        }

            ul li::before {
                content: '';
                position: absolute;
                height: 30px;
                width: 30px;
                border-radius: 50%;
                background: url(images/unchecked.png);
                background-size: cover;
                background-position: center;
                top: 12px;
                left: 8px;
            }

            ul li.checked {
                background: #3700a4;
                color: #fff;
                border-radius: 50px;
            }

                ul li.checked::before {
                    background: url(images/checked.png);
                    background-size: cover;
                }

            ul li span {
                position: absolute;
                top: 10px;
                margin-right: 5px;
                width: 30px;
                height: 30px;
                font-size: 22px;
                color: #000;
                line-height: 30px;
                text-align: center;
                border-radius: 50%;
            }

            ul li.checked span {
                color: #ffffff;
            }

                ul li.checked span:hover {
                    background: #fff;
                    color: #000;
                }

            ul li span:hover {
                background: #000;
                color: #fff;
            }

    </style>

    <title>Cash Guard</title>
</head>
<body>
    <section class="dashboard">
        <div class="dash-content">

            <div class="overview">
                <div class="title">
                    <i class="uil uil-tachometer-fast-alt"></i>
                    <span class="text">Dashboard</span>
                </div>

                <div class="boxes">
                    <div class="box box1">
                        <i class="bx bx-wallet"></i>
                        <span class="text">Total Money</span>
                        <span class="number">@currentBalance</span>
                    </div>
                    <div class="box box2">
                        <i class="bx bx-upvote"></i>
                        <span class="text">Expenses</span>
                        <span class="number">@totalExpense</span>
                    </div>
                    <div class="box box3">
                        <i class="bx bx-downvote"></i>
                        <span class="text">Income</span>
                        <span class="number">@totalIncome</span>
                    </div>
                </div>
            </div>

            <div class="activity">
                <div class="title">
                    <i class="uil uil-clock-three"></i>
                    <span class="text">Charts</span>
                </div>
                <div id="chartContainer"></div>
                <div id="chartContainer2"></div>
            </div>

            <div class="activity">
                <div class="title">
                    <i class="uil uil-clock-three"></i>
                    <span class="text">Recent Activity</span>
                </div>
            </div>
        </div>
    </section>
    <section class="dashboardd">
        <main class="table" id="customers_table">
            <section class="table__body">
                <section class="table__header">
                    <h1>Recent Actions</h1>
                    <div class="export__file">
                        <label for="export-file" class="export__file-btn" title="Export File"></label>
                        <input type="checkbox" id="export-file">
                    </div>
                </section>
                <table>
                    <thead>
                        <tr>
                            <th onclick="sortTable(0)">Id <span class="icon-arrow">&#9650;</span></th>
                            <th onclick="sortTable(1)">Category <span class="icon-arrow">&#9650;</span></th>
                            <th onclick="sortTable(2)">Name <span class="icon-arrow">&#9650;</span></th>
                            <th onclick="sortTable(3)">Action Date <span class="icon-arrow">&#9650;</span></th>
                            <th onclick="sortTable(4)" style="text-align:center">Type <span class="icon-arrow">&#9650;</span></th>
                            <th onclick="sortTable(5)">Amount <span class="icon-arrow">&#9650;</span></th>
                        </tr>
                    </thead>

                    <tbody>
                        <!-- For Each Here Class De-->
                        @foreach (var item in Model.Where(t => t.TransactionType == "Income" || t.TransactionType == "Expense"))
                        {
                            <tr>
                                <td> @item.Id </td>
                                <td> <img src="~/icons/@item.Category.Icon" alt="">@item.Category.Name</td>
                                <td> @item.Title </td>
                                <td> @item.Timestamp </td>
                                <td>
                                    @if (item.TransactionType == "Income")
                                    {
                                        <p class="status delivered">Income</p>
                                    <td>
                                        <strong class="inAmount"> $@item.Amount </strong>
                                    </td>
                                    }
                                    else
                                    {
                                    <p class="status cancelled">Expense</p>
                                    <td>
                                        <strong class="exAmount"> $@item.Amount </strong>
                                    </td>
                                    }
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </section>
        </main>

        <!-- List wrapper -->
        <div class="container">
            <div class="todo-app">
                <h2>To-Do List <img src="images/icon.png"></h2>

                <div class="row">
                    <input type="text" name="" id="input-box" placeholder="Add your Text">
                    <button onclick="addTask()">Add Task</button>
                </div>

                <ul id="list-container">
                    <!-- <li class="checked">Task 1</li>
                    <li>Task 2</li>
                    <li>Task 3</li> -->
                </ul>
            </div>
        </div>
    </section>
    <script src="/js/DashBoard.js"></script>
    <script>
        var table = document.getElementById("customers_table");
        table.style.width = "55vw";
    </script>
</body>
</html>