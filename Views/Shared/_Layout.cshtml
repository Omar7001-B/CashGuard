<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] Cash Guard</title>
    @{
        if (context.HttpContext.Session.GetString("UserName") != null)
        {
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
            <link rel="stylesheet" href="/css/MainPageStyles.css">
        }
    }


</head>
<body>
    @{
        if (context.HttpContext.Session.GetString("UserName") != null)
        {
            <div class="sidebar">
                <div class="top">
                    <div class="logo">
                        <i class="bx bxl-codepen"></i>
                        <span>Cash Guard</span>
                    </div>
                    <i class="bx bx-menu" id="btn"></i>
                </div>
                <div class="user">
                    <img src="@context.HttpContext.Session.GetString("PhotoPath")" alt="me" class="user-img">
                    <div>
                        <p class="bold">@context.HttpContext.Session.GetString("FirsName")</p>
                    </div>
                </div>
                <ul>
                    <li>
                        <a href="@Url.Action("Index", "Transaction")">
                            <i class="bx bxs-grid-alt"></i>
                            <span class="nav-item">Dashboard</span>
                        </a>
                        <span class="tooltip">Dashboard</span>
                    </li>
                    <li>
                        <a href="@Url.Action("TransactionAddition", "Transaction")">
                            <i class="bx bxs-add-to-queue"></i>
                            <span class="nav-item">Income</span>
                        </a>
                        <span class="tooltip">Income</span>
                    </li>
                    
                    <li>
                        <a href="@Url.Action("TransactionAddition", "Transaction")">
                            <i class="bx bx-edit-alt"></i>
                            <span class="nav-item">TO Buy List</span>
                        </a>
                        <span class="tooltip">To Buy</span>
                    </li>

                    @*
                    // Delete the Expense Button
                    <li>
                        <a href="@Url.Action("Expense", "Transaction")">
                            <i class="bx bxs-grid-alt"></i>
                            <span class="nav-item">Expense</span>
                        </a>
                        <span class="tooltip">Expense</span>
                    </li>
                    *@
                    <li>
                        <a href="@Url.Action("Index", "Category")">
                            <i class="bx bx-category-alt"></i>
                            <span class="nav-item">Add Category</span>
                        </a>
                        <span class="tooltip">Add Category</span>
                    </li>
                    <li>

                        <a href="@Url.Action("Index", "Analytics")">
                            <i class="bx bxs-filter-alt"></i>
                            <span class="nav-item">Filttering</span>
                        </a>
                        <span class="tooltip">Filttering</span>
                    </li>
                    <li>
                        <span class="tooltip">History</span>

                        <a href="@Url.Action("History", "Home")">
                            <i class="bx bx-history"></i>
                            <span class="nav-item">History</span>
                        </a>
                        <span class="tooltip">History</span>

                    </li>
                    <li>
                        <a href="/Edit/accountSettingPage">
                            <i class="bx bxs-user-account"></i>
                            <span class="nav-item">User Settings</span>
                        </a>
                        <span class="tooltip">User Settings</span>
                    </li>
                    <li>
                        <a href="@Url.Action("index", "GeneralSettings")">
                            <i class="bx bx-cog"></i>
                            <span class="nav-item">General Settings</span>
                        </a>
                        <span class="tooltip">General Settings</span>
                    </li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>


                    <li>
                        <a href="/Logout/index">
                            <i class="bx bx-log-out"></i>
                            <span class="nav-item">Log Out</span>
                        </a>
                        <span class="tooltip">Log Out</span>
                    </li>
                </ul>
            </div>

            <div class="main-content">
                <div class="container">
                    <main role="main" class="pb-3">
                        @RenderBody()
                    </main>
                </div>
            </div>
            <script>
                let lastScrollTop = 0;

                window.addEventListener('scroll', function () {
                    let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

                    if (scrollTop > lastScrollTop) {
                        // Scrolling down
                        document.getElementById('sidebar').classList.add('scrolled-down');
                        document.getElementById('main-content').classList.add('scrolled-down');
                    } else {
                        // Scrolling up
                        document.getElementById('sidebar').classList.remove('scrolled-down');
                        document.getElementById('main-content').classList.remove('scrolled-down');
                    }

                    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; // For Mobile or negative scrolling
                });
            </script>
            <script>
                let btn = document.querySelector("#btn");
                let sidebar = document.querySelector(".sidebar");

                btn.onclick = function () {
                    sidebar.style.zIndex = 1000 - sidebar.style.zIndex;
                    sidebar.classList.toggle("active");
                }
            </script>
        }
    }
    @{
        if (context.HttpContext.Session.GetString("UserName") == null)
        {
            <div class="main-content">
                <div class="container">
                    <main role="main" class="pb-3">
                        @RenderBody()
                    </main>
                </div>
            </div>
        }
    }
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>

<script type="text/javascript">
		function preventBack() { window.history.forward(); }
		setTimeout("preventBack()", 0);
		window.onunload = function () { null };

		// edit the .sidebar make its z-index to zero
		let sidebar22 = document.querySelector('.sidebar');
		sidebar22.style.zIndex = 0;
</script>
